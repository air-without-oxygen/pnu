<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대학 데이터 대화형 분석 리포트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; }
        .gradient-text { background: linear-gradient(135deg, #0f172a 0%, #2563eb 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        select { cursor: pointer; }
        .btn-home { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-home:hover { transform: scale(1.05); background-color: #2563eb; color: white; border-color: #2563eb; }
        .btn-home:active { transform: scale(0.95); }
        .reset-flash { animation: flash 0.5s ease-out; }
        @keyframes flash {
            0% { background-color: rgba(37, 99, 235, 0.2); }
            100% { background-color: transparent; }
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- 상단 헤더 -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200 py-4 px-6">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <!-- 홈으로 이동 버튼: 상대 경로 오류 방지를 위해 함수 호출 방식으로 변경 -->
                <button onclick="goToIndex()" class="btn-home flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 text-slate-600 shadow-sm font-bold text-sm" title="메인 페이지로 이동">
                    <i class="fa-solid fa-house"></i>
                    <span>홈으로</span>
                </button>
                <div class="h-6 w-[1px] bg-slate-200 mx-2"></div>
                <h1 class="text-xl font-bold gradient-text"><i class="fa-solid fa-chart-pie mr-2"></i>대학 데이터 정밀 분석</h1>
            </div>
            <div class="hidden md:flex items-center gap-2 text-xs font-semibold text-slate-400 uppercase tracking-widest">
                <span class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span> Analysis Mode
            </div>
        </div>
    </header>

    <main id="main-content" class="max-w-6xl mx-auto px-6 py-8 transition-colors duration-500">
        
        <!-- 대시보드 요약 가이드 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-white border border-slate-200 p-5 rounded-3xl shadow-sm hover:shadow-md transition-shadow">
                <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mb-3 text-lg">
                    <i class="fa-solid fa-location-dot"></i>
                </div>
                <h4 class="font-bold text-slate-800">지역별 분석</h4>
                <p class="text-xs text-slate-500 mt-1">부산, 경기, 서울 등 주요 지역 대학 비교</p>
            </div>
            <div class="bg-white border border-slate-200 p-5 rounded-3xl shadow-sm hover:shadow-md transition-shadow">
                <div class="w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mb-3 text-lg">
                    <i class="fa-solid fa-won-sign"></i>
                </div>
                <h4 class="font-bold text-slate-800">경제적 지표</h4>
                <p class="text-xs text-slate-500 mt-1">등록금 대비 장학금 및 실부담액</p>
            </div>
            <div class="bg-white border border-slate-200 p-5 rounded-3xl shadow-sm hover:shadow-md transition-shadow">
                <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mb-3 text-lg">
                    <i class="fa-solid fa-briefcase"></i>
                </div>
                <h4 class="font-bold text-slate-800">취업 성과</h4>
                <p class="text-xs text-slate-500 mt-1">대학별 공시 취업률 및 경쟁률 비교</p>
            </div>
        </div>

        <!-- 대학 선택 섹션 -->
        <section class="bg-white rounded-3xl p-8 mb-8 shadow-sm border border-slate-200">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="relative">
                    <label class="block text-slate-400 text-[10px] font-bold uppercase mb-2 tracking-tighter">비교 대상 A</label>
                    <select id="univA" onchange="updateAnalysis()" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-sm font-bold shadow-sm appearance-none">
                        <!-- JS에서 옵션 채움 -->
                    </select>
                    <i class="fa-solid fa-chevron-down absolute right-6 bottom-5 text-slate-300 pointer-events-none"></i>
                </div>
                <div class="relative">
                    <label class="block text-slate-400 text-[10px] font-bold uppercase mb-2 tracking-tighter">비교 대상 B</label>
                    <select id="univB" onchange="updateAnalysis()" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 focus:ring-4 focus:ring-purple-100 outline-none transition-all text-sm font-bold shadow-sm appearance-none">
                        <!-- JS에서 옵션 채움 -->
                    </select>
                    <i class="fa-solid fa-chevron-down absolute right-6 bottom-5 text-slate-300 pointer-events-none"></i>
                </div>
            </div>
        </section>

        <!-- 차트 섹션 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
                <h3 class="font-bold text-slate-800 mb-6 flex items-center gap-2">
                    <i class="fa-solid fa-coins text-blue-500"></i> 학비 및 장학금 구조
                </h3>
                <div class="h-80">
                    <canvas id="costChart"></canvas>
                </div>
            </div>
            <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
                <h3 class="font-bold text-slate-800 mb-6 flex items-center gap-2">
                    <i class="fa-solid fa-bullseye text-emerald-500"></i> 핵심 성과 레이더
                </h3>
                <div class="h-80">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
        </div>

        <!-- 상세 비교 테이블 -->
        <div class="bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden mb-12">
            <div class="bg-slate-50 px-8 py-5 border-b border-slate-200">
                <h3 class="font-bold text-slate-700 text-sm">상세 데이터 비교 매트릭스</h3>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead>
                        <tr class="text-[10px] text-slate-400 uppercase font-extrabold border-b border-slate-100">
                            <th class="px-8 py-5 w-1/4">지표명</th>
                            <th id="table-head-a" class="px-8 py-5 text-blue-600">대학교 A</th>
                            <th id="table-head-b" class="px-8 py-5 text-purple-600">대학교 B</th>
                            <th class="px-8 py-5">분석 노트</th>
                        </tr>
                    </thead>
                    <tbody id="comparison-table-body" class="text-sm divide-y divide-slate-50">
                        <!-- 데이터 채워짐 -->
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script>
        const rawData = [
            { name: "부산대학교", type: "국립", region: "부산", competition: 12.5, tuition: 4450000, scholarship: 3200000, jobRate: 68.9, cat: "거점국립" },
            { name: "국립부경대학교", type: "국립", region: "부산", competition: 10.8, tuition: 4200000, scholarship: 3050000, jobRate: 64.2, cat: "국립특성" },
            { name: "가천대학교", type: "사립", region: "경기", competition: 21.4, tuition: 9696800, scholarship: 3248180, jobRate: 65.1, cat: "수도권대형" },
            { name: "동서대학교", type: "사립", region: "부산", competition: 11.2, tuition: 8600000, scholarship: 3400000, jobRate: 69.8, cat: "특성화사립" },
            { name: "한국공학대학교", type: "사립", region: "경기", competition: 14.8, tuition: 9100000, scholarship: 3500000, jobRate: 74.2, cat: "산업특성" },
            { name: "경남정보대학교", type: "사립", region: "부산", competition: 15.4, tuition: 6800000, scholarship: 2500000, jobRate: 78.5, cat: "전문대학" },
            { name: "서강대학교", type: "사립", region: "서울", competition: 28.5, tuition: 9500000, scholarship: 3900000, jobRate: 78.4, cat: "인서울" }
        ];

        let costChart, performanceChart;

        // index.html로 이동하는 함수
        function goToIndex() {
            try {
                // 현재 URL 구조에 맞춰 index.html로 이동
                const currentPath = window.location.pathname;
                const newPath = currentPath.substring(0, currentPath.lastIndexOf('/') + 1) + 'index.html';
                window.location.href = newPath;
            } catch (e) {
                // 폴백: 일반적인 상대 경로 이동
                window.location.assign('index.html');
            }
        }

        function init() {
            const selectA = document.getElementById('univA');
            const selectB = document.getElementById('univB');
            
            const regions = ["부산", "경기", "서울"];
            regions.forEach(region => {
                const groupA = document.createElement('optgroup');
                groupA.label = region + " 지역";
                const groupB = document.createElement('optgroup');
                groupB.label = region + " 지역";

                rawData.filter(d => d.region === region).forEach(univ => {
                    const idx = rawData.indexOf(univ);
                    groupA.appendChild(new Option(`${univ.name} (${univ.cat})`, idx));
                    groupB.appendChild(new Option(`${univ.name} (${univ.cat})`, idx));
                });
                selectA.add(groupA);
                selectB.add(groupB);
            });

            createCharts();
            // 페이지 로드 시 초기값 설정
            const idxA = rawData.findIndex(u => u.name === "부산대학교");
            const idxB = rawData.findIndex(u => u.name === "가천대학교");
            selectA.value = idxA;
            selectB.value = idxB;
            updateAnalysis();
        }

        function createCharts() {
            const chartOptions = { 
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom', labels: { boxWidth: 12, usePointStyle: true, font: { size: 11 } } } }
            };

            const ctx1 = document.getElementById('costChart').getContext('2d');
            costChart = new Chart(ctx1, {
                type: 'bar',
                data: { labels: ['등록금', '장학금', '실제부담'], datasets: [] },
                options: chartOptions
            });

            const ctx2 = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(ctx2, {
                type: 'radar',
                data: { labels: ['취업률(%)', '경쟁률(x4)', '장학비율(%)'], datasets: [] },
                options: { ...chartOptions, scales: { r: { beginAtZero: true, max: 100, ticks: { display: false } } } }
            });
        }

        function updateAnalysis() {
            const a = rawData[document.getElementById('univA').value];
            const b = rawData[document.getElementById('univB').value];

            document.getElementById('table-head-a').innerText = a.name;
            document.getElementById('table-head-b').innerText = b.name;

            costChart.data.datasets = [
                { label: a.name, data: [a.tuition, a.scholarship, a.tuition - a.scholarship], backgroundColor: '#3b82f6', borderRadius: 8 },
                { label: b.name, data: [b.tuition, b.scholarship, b.tuition - b.scholarship], backgroundColor: '#a855f7', borderRadius: 8 }
            ];
            costChart.update();

            performanceChart.data.datasets = [
                { label: a.name, data: [a.jobRate, a.competition * 4, (a.scholarship/a.tuition)*100], borderColor: '#3b82f6', backgroundColor: 'rgba(59,130,246,0.1)', pointRadius: 4, borderWidth: 2 },
                { label: b.name, data: [b.jobRate, b.competition * 4, (b.scholarship/b.tuition)*100], borderColor: '#a855f7', backgroundColor: 'rgba(168,85,247,0.1)', pointRadius: 4, borderWidth: 2 }
            ];
            performanceChart.update();

            const rows = [
                ["지역 및 학제", `${a.region} / ${a.cat}`, `${b.region} / ${b.cat}`, "입지 조건 비교"],
                ["공시 취업률", a.jobRate + "%", b.jobRate + "%", a.jobRate > b.jobRate ? "A 우세" : "B 우세"],
                ["신입생 경쟁률", a.competition + ":1", b.competition + ":1", "최근 선호도"],
                ["연간 실부담금", (a.tuition-a.scholarship).toLocaleString() + "원", (b.tuition-b.scholarship).toLocaleString() + "원", "경제적 가치"]
            ];

            document.getElementById('comparison-table-body').innerHTML = rows.map(row => `
                <tr class="hover:bg-slate-50 transition-colors">
                    <td class="px-8 py-4 font-bold text-slate-400 text-[10px] uppercase tracking-tighter">${row[0]}</td>
                    <td class="px-8 py-4 font-bold text-slate-900">${row[1]}</td>
                    <td class="px-8 py-4 font-bold text-slate-900">${row[2]}</td>
                    <td class="px-8 py-4 text-xs text-slate-500 font-medium italic">${row[3]}</td>
                </tr>
            `).join('');
        }

        window.onload = init;
    </script>
</body>
</html>
