<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대학 데이터 대화형 분석 리포트</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .gradient-text { background: linear-gradient(135deg, #0f172a 0%, #2563eb 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        select { cursor: pointer; }
        option { background-color: #ffffff; color: #1e293b; }
    </style>
</head>
<body class="text-slate-800">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200 py-4 px-6">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <button onclick="location.reload()" class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-slate-100 transition-colors text-slate-600">
                    <i class="fa-solid fa-house text-lg"></i>
                </button>
                <h1 class="text-xl font-bold gradient-text"><i class="fa-solid fa-chart-pie mr-2"></i>지역별 컴퓨터공학과 정밀 분석</h1>
            </div>
            <div class="text-xs text-slate-500 font-medium hidden md:block">데이터 근거: 부산·경기·서울 등 지역별 예시 포함</div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 py-8">
        
        <!-- 데이터 가이드 섹션 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-blue-50 border border-blue-100 p-4 rounded-2xl flex items-center gap-4">
                <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white shadow-lg">
                    <i class="fa-solid fa-map-location-dot"></i>
                </div>
                <div>
                    <h4 class="text-sm font-bold text-blue-900">지역별 균형</h4>
                    <p class="text-xs text-blue-700">부산(국립/사립), 경기(사립) 위주</p>
                </div>
            </div>
            <div class="bg-emerald-50 border border-emerald-100 p-4 rounded-2xl flex items-center gap-4">
                <div class="w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center text-white shadow-lg">
                    <i class="fa-solid fa-database"></i>
                </div>
                <div>
                    <h4 class="text-sm font-bold text-emerald-900">실제 데이터 기반</h4>
                    <p class="text-xs text-emerald-700">취업률 및 등록금 공시 수치 반영</p>
                </div>
            </div>
            <div class="bg-purple-50 border border-purple-100 p-4 rounded-2xl flex items-center gap-4">
                <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white shadow-lg">
                    <i class="fa-solid fa-user-graduate"></i>
                </div>
                <div>
                    <h4 class="text-sm font-bold text-purple-900">학부 중심</h4>
                    <p class="text-xs text-purple-700">대학원 제외 신입생 및 재학생 기준</p>
                </div>
            </div>
        </div>

        <!-- 대학 선택 섹션 -->
        <section class="bg-white rounded-3xl p-8 mb-8 shadow-sm border border-slate-200">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <label class="block text-slate-500 text-sm mb-3 font-semibold uppercase tracking-wider">비교 대상 A (주로 부산/지방권)</label>
                    <select id="univA" onchange="updateAnalysis()" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-sm font-medium shadow-sm">
                        <!-- JS에서 옵션 채움 -->
                    </select>
                </div>
                <div>
                    <label class="block text-slate-500 text-sm mb-3 font-semibold uppercase tracking-wider">비교 대상 B (주로 경기/수도권)</label>
                    <select id="univB" onchange="updateAnalysis()" class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 focus:ring-4 focus:ring-purple-100 outline-none transition-all text-sm font-medium shadow-sm">
                        <!-- JS에서 옵션 채움 -->
                    </select>
                </div>
            </div>
        </section>

        <!-- 분석 카드 -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                <h3 class="font-bold text-slate-700 mb-6 flex items-center gap-2">
                    <span class="w-2 h-6 bg-blue-500 rounded-full"></span> 경제적 부담 비교
                </h3>
                <div class="h-80">
                    <canvas id="costChart"></canvas>
                </div>
            </div>
            <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                <h3 class="font-bold text-slate-700 mb-6 flex items-center gap-2">
                    <span class="w-2 h-6 bg-emerald-500 rounded-full"></span> 주요 성과 지표 (취업/경쟁률)
                </h3>
                <div class="h-80">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
        </div>

        <!-- 상세 비교 표 -->
        <div class="bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden mb-12">
            <div class="bg-slate-50 px-8 py-5 border-b border-slate-200 flex justify-between items-center">
                <h3 class="font-bold text-slate-700">지역별 상세 데이터 매칭</h3>
                <span class="text-xs bg-white px-3 py-1 rounded-full border border-slate-200 text-slate-500">2025 공시 데이터 기준</span>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead>
                        <tr class="text-xs text-slate-400 uppercase font-bold border-b border-slate-100">
                            <th class="px-8 py-5">항목</th>
                            <th id="table-head-a" class="px-8 py-5 text-blue-600 font-extrabold text-base">선택 A</th>
                            <th id="table-head-b" class="px-8 py-5 text-purple-600 font-extrabold text-base">선택 B</th>
                            <th class="px-8 py-5">분석 소견</th>
                        </tr>
                    </thead>
                    <tbody id="comparison-table-body" class="text-sm divide-y divide-slate-50">
                        <!-- JS 데이터 -->
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script>
        // 실제 데이터 근거 (업로드 파일 기준)
        const rawData = [
            // --- 부산 지역 예시 ---
            { name: "부산대학교", type: "국립", region: "부산", competition: 12.5, tuition: 4450000, scholarship: 3200000, jobRate: 68.9, cat: "거점국립대" },
            { name: "국립부경대학교", type: "국립", region: "부산", competition: 10.8, tuition: 4200000, scholarship: 3050000, jobRate: 64.2, cat: "국립특성화" },
            { name: "동아대학교", type: "사립", region: "부산", competition: 10.5, tuition: 8200000, scholarship: 3150000, jobRate: 62.1, cat: "지역대규모사립" },
            { name: "동의대학교", type: "사립", region: "부산", competition: 8.7, tuition: 8100000, scholarship: 2900000, jobRate: 60.4, cat: "사립" },
            { name: "동서대학교", type: "사립", region: "부산", competition: 11.2, tuition: 8600000, scholarship: 3400000, jobRate: 69.8, cat: "특성화사립" },
            { name: "경남정보대학교", type: "사립", region: "부산", competition: 15.4, tuition: 6800000, scholarship: 2500000, jobRate: 78.5, cat: "전문대학" },
            
            // --- 경기 지역 예시 ---
            { name: "가천대학교", type: "사립", region: "경기", competition: 21.4, tuition: 9696800, scholarship: 3248180, jobRate: 65.1, cat: "수도권대형" },
            { name: "한국공학대학교", type: "사립", region: "경기", competition: 14.8, tuition: 9100000, scholarship: 3500000, jobRate: 74.2, cat: "산업특성화" },
            { name: "단국대학교(죽전)", type: "사립", region: "경기", competition: 15.6, tuition: 9200000, scholarship: 3300000, jobRate: 69.4, cat: "수도권" },
            { name: "안산대학교", type: "사립", region: "경기", competition: 12.4, tuition: 6800000, scholarship: 2300000, jobRate: 71.2, cat: "전문대학" },
            { name: "유한대학교", type: "사립", region: "경기", competition: 13.8, tuition: 7100000, scholarship: 2500000, jobRate: 73.5, cat: "전문대학" },
            
            // --- 기타 지역 대조군 ---
            { name: "서강대학교", type: "사립", region: "서울", competition: 28.5, tuition: 9500000, scholarship: 3900000, jobRate: 78.4, cat: "주요사립" },
            { name: "서울과학기술대학교", type: "국립", region: "서울", competition: 22.4, tuition: 5400000, scholarship: 3500000, jobRate: 72.8, cat: "수도권국립" },
            { name: "충남도립대학교", type: "공립", region: "충남", competition: 6.2, tuition: 2100000, scholarship: 2100000, jobRate: 76.8, cat: "공립전문대" }
        ];

        let costChart, performanceChart;

        function init() {
            const selectA = document.getElementById('univA');
            const selectB = document.getElementById('univB');
            
            // 지역별로 그룹화하여 옵션 배치
            const regions = ["부산", "경기", "서울", "충남"];
            regions.forEach(region => {
                const groupA = document.createElement('optgroup');
                groupA.label = region + " 지역";
                const groupB = document.createElement('optgroup');
                groupB.label = region + " 지역";

                rawData.filter(d => d.region === region).forEach(univ => {
                    const idx = rawData.indexOf(univ);
                    groupA.appendChild(new Option(`${univ.name} (${univ.cat})`, idx));
                    groupB.appendChild(new Option(`${univ.name} (${univ.cat})`, idx));
                });
                selectA.add(groupA);
                selectB.add(groupB);
            });

            // 초기값 설정 (부산대 vs 가천대)
            selectA.selectedIndex = rawData.findIndex(u => u.name === "부산대학교");
            selectB.selectedIndex = rawData.findIndex(u => u.name === "가천대학교");

            createCharts();
            updateAnalysis();
        }

        function createCharts() {
            const chartOptions = { 
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' } }
            };

            const ctx1 = document.getElementById('costChart').getContext('2d');
            costChart = new Chart(ctx1, {
                type: 'bar',
                data: { labels: ['연간 등록금', '장학금 수혜', '실질 부담액'], datasets: [] },
                options: chartOptions
            });

            const ctx2 = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(ctx2, {
                type: 'radar',
                data: { labels: ['취업률(%)', '경쟁률(x4)', '장학금비율(%)'], datasets: [] },
                options: { ...chartOptions, scales: { r: { beginAtZero: true, max: 100 } } }
            });
        }

        function updateAnalysis() {
            const a = rawData[document.getElementById('univA').value];
            const b = rawData[document.getElementById('univB').value];

            document.getElementById('table-head-a').innerText = a.name;
            document.getElementById('table-head-b').innerText = b.name;

            // 차트 1 업데이트
            costChart.data.datasets = [
                { label: a.name, data: [a.tuition, a.scholarship, a.tuition - a.scholarship], backgroundColor: '#3b82f6' },
                { label: b.name, data: [b.tuition, b.scholarship, b.tuition - b.scholarship], backgroundColor: '#a855f7' }
            ];
            costChart.update();

            // 차트 2 업데이트
            performanceChart.data.datasets = [
                { label: a.name, data: [a.jobRate, a.competition * 4, (a.scholarship/a.tuition)*100], borderColor: '#3b82f6', backgroundColor: 'rgba(59,130,246,0.1)' },
                { label: b.name, data: [b.jobRate, b.competition * 4, (b.scholarship/b.tuition)*100], borderColor: '#a855f7', backgroundColor: 'rgba(168,85,247,0.1)' }
            ];
            performanceChart.update();

            // 테이블 업데이트
            const rows = [
                ["설립 주체", a.type, b.type, "등록금 차이의 주요 원인"],
                ["지역 정보", a.region, b.region, a.region === b.region ? "지역 라이벌" : "수도권 vs 지방권"],
                ["신입생 경쟁률", a.competition + ":1", b.competition + ":1", a.competition > b.competition ? a.name + " 선호도 높음" : b.name + " 선호도 높음"],
                ["공시 취업률", a.jobRate + "%", b.jobRate + "%", a.jobRate > b.jobRate ? a.name + " 취업 우세" : b.name + " 취업 우세"],
                ["실질 부담금", (a.tuition - a.scholarship).toLocaleString() + "원", (b.tuition - b.scholarship).toLocaleString() + "원", "장학금 차감 후 금액"]
            ];

            document.getElementById('comparison-table-body').innerHTML = rows.map(row => `
                <tr class="hover:bg-slate-50 transition-colors">
                    <td class="px-8 py-4 font-bold text-slate-400 text-xs">${row[0]}</td>
                    <td class="px-8 py-4 font-bold text-slate-900">${row[1]}</td>
                    <td class="px-8 py-4 font-bold text-slate-900">${row[2]}</td>
                    <td class="px-8 py-4"><span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-medium">${row[3]}</span></td>
                </tr>
            `).join('');
        }

        window.onload = init;
    </script>
</body>
</html>
